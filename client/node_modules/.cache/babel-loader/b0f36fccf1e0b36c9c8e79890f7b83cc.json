{"ast":null,"code":"var _jsxFileName = \"/home/agung/Downloads/joki/covid19-diagnosis/client/src/views/Profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Navbar from \"components/Navbars/AuthNavbar.js\";\nimport Footer from \"components/Footers/Footer.js\";\nimport firebase from \"../services/firebase\";\nimport Axios from \"axios\";\nimport { DateTimeHelper } from \"../helpers\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Profile() {\n  _s();\n\n  const [user, setUser] = React.useState(null);\n  const [riwayat, setRiwayat] = React.useState([]);\n  const history = useHistory();\n  const data = localStorage.getItem(\"authUser\");\n  React.useEffect(() => {\n    if (data) {\n      const authUser = JSON.parse(data);\n\n      if (authUser.role !== \"user\") {\n        history.push(\"/auth/login\");\n      } else {\n        Axios.get(`http://localhost:3001/api/member/${authUser.id_member}`).then(response => {\n          response.data.forEach(item => {\n            setUser({ ...item\n            });\n          });\n        });\n        Axios.get(`http://localhost:3001/api/history/${authUser.id_member}`).then(response => {\n          response.data.forEach(item => {\n            setRiwayat({ ...item\n            });\n          });\n        });\n      }\n    } else {\n      history.push(\"/auth/login\");\n    }\n  }, [data, history]);\n\n  const editProfile = async () => {\n    const metadata = {\n      contentType: \"image/jpeg\"\n    };\n    const type = \"png\";\n    const newKey = this.formData.id ? this.formData.id : DateTimeHelper.getCurrentTimeMs();\n    let urlImg = this.formData.id ? this.formData.image : \"\";\n\n    if (this.formData.image) {\n      if (this.formData.urlImage) {\n        await firebase.storage().ref(`users/img-${newKey}.${type}`).delete();\n      }\n\n      await firebase.storage().ref(`users/img-${newKey}.${type}`).put(this.formData.image, metadata);\n      urlImg = await firebase.storage().ref(`users/img-${newKey}.${type}`).getDownloadURL();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"profile-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"relative block h-500-px\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-0 w-full h-full bg-center bg-cover\",\n          style: {\n            backgroundImage: \"url('https://images.unsplash.com/photo-1499336315816-097655dcfbda?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2710&q=80')\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            id: \"blackOverlay\",\n            className: \"w-full h-full absolute opacity-50 bg-black\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"top-auto bottom-0 left-0 right-0 w-full absolute pointer-events-none overflow-hidden h-70-px\",\n          style: {\n            transform: \"translateZ(0)\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"absolute bottom-0 overflow-hidden\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            preserveAspectRatio: \"none\",\n            version: \"1.1\",\n            viewBox: \"0 0 2560 100\",\n            x: \"0\",\n            y: \"0\",\n            children: /*#__PURE__*/_jsxDEV(\"polygon\", {\n              className: \"text-blueGray-200 fill-current\",\n              points: \"2560 0 2560 100 0 100\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"relative py-16 bg-blueGray-200\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container mx-auto px-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-xl rounded-lg -mt-64\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"px-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-wrap justify-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-full lg:w-3/12 px-4 lg:order-2 flex justify-center\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"relative profilepic\",\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      alt: \"...\",\n                      src: user && user.foto_profil ? user.foto_profil : require(\"assets/img/default-image-user.png\").default,\n                      className: \"profilepic__image shadow-xl rounded-full h-auto align-middle border-none max-w-150-px\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 112,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"profilepic__content\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"profilepic__icon\",\n                        children: /*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"fas fa-camera\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 124,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 123,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"profilepic__text\",\n                        children: \"Ganti Foto\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 126,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 122,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 111,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-full lg:w-4/12 px-4 lg:order-3 lg:text-right lg:self-center\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"py-6 px-3 mt-32 sm:mt-0\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"bg-blueGray-800 active:bg-blueGray-65 uppercase text-white font-bold hover:shadow-md shadow text-xs px-4 py-2 rounded outline-none focus:outline-none sm:mr-2 mb-1 ease-linear transition-all duration-150\",\n                      type: \"button\",\n                      children: \"Edit Profil\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 132,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-full lg:w-4/12 px-4 lg:order-1\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex justify-center py-4 lg:pt-4 pt-8\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"mr-4 p-3 text-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-xl font-bold block uppercase tracking-wide text-blueGray-600\",\n                        children: riwayat.length\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 143,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-sm text-blueGray-400\",\n                        children: \"Riwayat Diagnosis\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 146,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 142,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 141,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center mt-12\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-4xl font-semibold leading-normal text-blueGray-700 mb-2\",\n                  children: [user && user.nama_member, /*#__PURE__*/_jsxDEV(\"i\", {\n                    class: \"fas fa-female\",\n                    style: {\n                      color: \"#F783AC\",\n                      fontSize: \"24px\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 156,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm leading-normal mt-0 mb-2 text-blueGray-400 font-bold uppercase\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    class: \"fas fa-female\",\n                    style: {\n                      color: \"#F783AC\",\n                      fontSize: \"24px\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm leading-normal mt-0 mb-2 text-blueGray-400 font-bold uppercase\",\n                  children: [user && user.tempat_lahir, \",\", \" \", DateTimeHelper.getFormatedDate(user && user.tanggal_lahir, \"DD MMMM YYYY\")]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm leading-normal mt-0 mb-2 text-blueGray-400 font-bold uppercase\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-envelope mr-2 text-lg text-blueGray-400\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 21\n                  }, this), user && user.email]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm leading-normal mt-0 mb-2 text-blueGray-400 font-bold uppercase\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-mobile-alt mr-2 text-lg text-blueGray-400\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 179,\n                    columnNumber: 21\n                  }, this), user && user.nomor_hp]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-10 py-10 border-t border-blueGray-200 text-center\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-wrap justify-center\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-full lg:w-9/12 px-4\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"mb-4 text-lg leading-relaxed text-blueGray-700\",\n                      children: user && user.alamat\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 186,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 185,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Profile, \"6Z8wS9MDG2yh4L7X1MWa1B4zb2I=\", false, function () {\n  return [useHistory];\n});\n\n_c = Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/home/agung/Downloads/joki/covid19-diagnosis/client/src/views/Profile.js"],"names":["React","useState","useHistory","Navbar","Footer","firebase","Axios","DateTimeHelper","Profile","user","setUser","riwayat","setRiwayat","history","data","localStorage","getItem","useEffect","authUser","JSON","parse","role","push","get","id_member","then","response","forEach","item","editProfile","metadata","contentType","type","newKey","formData","id","getCurrentTimeMs","urlImg","image","urlImage","storage","ref","delete","put","getDownloadURL","backgroundImage","transform","foto_profil","require","default","length","nama_member","color","fontSize","tempat_lahir","getFormatedDate","tanggal_lahir","email","nomor_hp","alamat"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nimport Navbar from \"components/Navbars/AuthNavbar.js\";\nimport Footer from \"components/Footers/Footer.js\";\nimport firebase from \"../services/firebase\";\nimport Axios from \"axios\";\nimport { DateTimeHelper } from \"../helpers\";\n\nexport default function Profile() {\n  const [user, setUser] = React.useState(null);\n  const [riwayat, setRiwayat] = React.useState([]);\n\n  const history = useHistory();\n  const data = localStorage.getItem(\"authUser\");\n\n  React.useEffect(() => {\n    if (data) {\n      const authUser = JSON.parse(data);\n      if (authUser.role !== \"user\") {\n        history.push(\"/auth/login\");\n      } else {\n        Axios.get(\n          `http://localhost:3001/api/member/${authUser.id_member}`\n        ).then((response) => {\n          response.data.forEach((item) => {\n            setUser({ ...item });\n          });\n        });\n\n        Axios.get(\n          `http://localhost:3001/api/history/${authUser.id_member}`\n        ).then((response) => {\n          response.data.forEach((item) => {\n            setRiwayat({ ...item });\n          });\n        });\n      }\n    } else {\n      history.push(\"/auth/login\");\n    }\n  }, [data, history]);\n\n  const editProfile = async () => {\n    const metadata = {\n      contentType: \"image/jpeg\",\n    };\n    const type = \"png\";\n    const newKey = this.formData.id\n      ? this.formData.id\n      : DateTimeHelper.getCurrentTimeMs();\n    let urlImg = this.formData.id ? this.formData.image : \"\";\n    if (this.formData.image) {\n      if (this.formData.urlImage) {\n        await firebase.storage().ref(`users/img-${newKey}.${type}`).delete();\n      }\n      await firebase\n        .storage()\n        .ref(`users/img-${newKey}.${type}`)\n        .put(this.formData.image, metadata);\n      urlImg = await firebase\n        .storage()\n        .ref(`users/img-${newKey}.${type}`)\n        .getDownloadURL();\n    }\n  };\n\n  return (\n    <>\n      <Navbar />\n      <main className=\"profile-page\">\n        <section className=\"relative block h-500-px\">\n          <div\n            className=\"absolute top-0 w-full h-full bg-center bg-cover\"\n            style={{\n              backgroundImage:\n                \"url('https://images.unsplash.com/photo-1499336315816-097655dcfbda?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2710&q=80')\",\n            }}\n          >\n            <span\n              id=\"blackOverlay\"\n              className=\"w-full h-full absolute opacity-50 bg-black\"\n            ></span>\n          </div>\n          <div\n            className=\"top-auto bottom-0 left-0 right-0 w-full absolute pointer-events-none overflow-hidden h-70-px\"\n            style={{ transform: \"translateZ(0)\" }}\n          >\n            <svg\n              className=\"absolute bottom-0 overflow-hidden\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              preserveAspectRatio=\"none\"\n              version=\"1.1\"\n              viewBox=\"0 0 2560 100\"\n              x=\"0\"\n              y=\"0\"\n            >\n              <polygon\n                className=\"text-blueGray-200 fill-current\"\n                points=\"2560 0 2560 100 0 100\"\n              ></polygon>\n            </svg>\n          </div>\n        </section>\n        <section className=\"relative py-16 bg-blueGray-200\">\n          <div className=\"container mx-auto px-4\">\n            <div className=\"relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-xl rounded-lg -mt-64\">\n              <div className=\"px-6\">\n                <div className=\"flex flex-wrap justify-center\">\n                  <div className=\"w-full lg:w-3/12 px-4 lg:order-2 flex justify-center\">\n                    <div className=\"relative profilepic\">\n                      <img\n                        alt=\"...\"\n                        src={\n                          user && user.foto_profil\n                            ? user.foto_profil\n                            : require(\"assets/img/default-image-user.png\")\n                                .default\n                        }\n                        className=\"profilepic__image shadow-xl rounded-full h-auto align-middle border-none max-w-150-px\"\n                      />\n                      <div className=\"profilepic__content\">\n                        <span className=\"profilepic__icon\">\n                          <i className=\"fas fa-camera\"></i>\n                        </span>\n                        <span className=\"profilepic__text\">Ganti Foto</span>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"w-full lg:w-4/12 px-4 lg:order-3 lg:text-right lg:self-center\">\n                    <div className=\"py-6 px-3 mt-32 sm:mt-0\">\n                      <button\n                        className=\"bg-blueGray-800 active:bg-blueGray-65 uppercase text-white font-bold hover:shadow-md shadow text-xs px-4 py-2 rounded outline-none focus:outline-none sm:mr-2 mb-1 ease-linear transition-all duration-150\"\n                        type=\"button\"\n                      >\n                        Edit Profil\n                      </button>\n                    </div>\n                  </div>\n                  <div className=\"w-full lg:w-4/12 px-4 lg:order-1\">\n                    <div className=\"flex justify-center py-4 lg:pt-4 pt-8\">\n                      <div className=\"mr-4 p-3 text-center\">\n                        <span className=\"text-xl font-bold block uppercase tracking-wide text-blueGray-600\">\n                          {riwayat.length}\n                        </span>\n                        <span className=\"text-sm text-blueGray-400\">\n                          Riwayat Diagnosis\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"text-center mt-12\">\n                  <h3 className=\"text-4xl font-semibold leading-normal text-blueGray-700 mb-2\">\n                    {user && user.nama_member}\n                    <i\n                      class=\"fas fa-female\"\n                      style={{ color: \"#F783AC\", fontSize: \"24px\" }}\n                    ></i>\n                  </h3>\n                  <div className=\"text-sm leading-normal mt-0 mb-2 text-blueGray-400 font-bold uppercase\">\n                    <i\n                      class=\"fas fa-female\"\n                      style={{ color: \"#F783AC\", fontSize: \"24px\" }}\n                    ></i>\n                  </div>\n                  <div className=\"text-sm leading-normal mt-0 mb-2 text-blueGray-400 font-bold uppercase\">\n                    {user && user.tempat_lahir},{\" \"}\n                    {DateTimeHelper.getFormatedDate(\n                      user && user.tanggal_lahir,\n                      \"DD MMMM YYYY\"\n                    )}\n                  </div>\n                  <div className=\"text-sm leading-normal mt-0 mb-2 text-blueGray-400 font-bold uppercase\">\n                    <i className=\"fas fa-envelope mr-2 text-lg text-blueGray-400\"></i>\n                    {user && user.email}\n                  </div>\n                  <div className=\"text-sm leading-normal mt-0 mb-2 text-blueGray-400 font-bold uppercase\">\n                    <i className=\"fas fa-mobile-alt mr-2 text-lg text-blueGray-400\"></i>\n                    {user && user.nomor_hp}\n                  </div>\n                </div>\n                <div className=\"mt-10 py-10 border-t border-blueGray-200 text-center\">\n                  <div className=\"flex flex-wrap justify-center\">\n                    <div className=\"w-full lg:w-9/12 px-4\">\n                      <p className=\"mb-4 text-lg leading-relaxed text-blueGray-700\">\n                        {user && user.alamat}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      </main>\n      <Footer />\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}